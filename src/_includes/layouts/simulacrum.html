{% extends "layouts/base.html" %}

{% set title = name %}
{% set background = page.fileSlug %}

{% macro icon(src, alt, title) %}
<img
	src="/assets/images/icon/{{ src }}.png"
	alt="{{ alt }}"
	title="{{ title }}"
	class="inline-block"
	width="34"
	height="31"
>
{% endmacro %}

{% block content %}
<div class="bg-sheet-1 region stack wrapper">
	<header class="mb-2xl">
		<h1>{{ title }}</h1>
		<p class="font-fancy uppercase text-step-2">
			<span class="highlight-rarity" data-rarity="{{ rarity }}">{{ string.rarity[rarity - 1] }}</span> Simulacrum
		</p>
	</header>
	<article class="stack">
		<h2>Weapon</h2>
		<article class="stack">
			<img src="/assets/images/wep/{{ page.fileSlug }}.png" alt="" width="128" height="128">
			<h3>{{ weapon.name }}</h3>
			{{ icon('reso_' + weapon.resonance, weapon.resonance, 'Resonance: ' + weapon.resonance | capitalize) }}
			{{ icon('ele_' + weapon.element, weapon.element, 'Element: ' + weapon.element | capitalize) }}
			<div>
				<p>
					{% set chargeRating = helpers.getWeaponRating(weapon.charge, string.weaponRating) %}
					<span class="highlight-rarity" data-rarity="{{ chargeRating.rarityColor }}">{{ chargeRating.rank | upper }}</span>
					Charge: <b>{{ weapon.charge.toFixed(2) }}</b>
				</p>
				<p>
					{% set shatterRating = helpers.getWeaponRating(weapon.shatter, string.weaponRating) %}
					<span class="highlight-rarity" data-rarity="{{ shatterRating.rarityColor }}">{{ shatterRating.rank | upper }}</span>
					Shatter: <b>{{ weapon.shatter.toFixed(2) }}</b>
				</p>
			</div>
			<div class="highlight-bold stack">
				<h4 class="highlight-element highlight-bold font-fancy">{{ string.element[weapon.element].effectName }}</h4>
				{{ string.element[weapon.element].description | markdown | safe }}
			</div>
			{% if weapon.exclusiveEffect %}
			<div class="highlight-bold stack">
				<h4 class="highlight-bold font-fancy">Bonus Effect</h4>
				{{ weapon.exclusiveEffect | markdown | safe }}
			</div>
			{% endif %}
		</article>
		<article class="highlight-bold stack">
			<h3>Awakening</h3>
			<table data-stripe="even">
				<thead class="visually-hidden">
					<tr>
						<th scope="col">Stars</th>
						<th scope="col">Bonus</th>
					</tr>
				</thead>
				<tbody>
					{% for item in weapon.awakening %}
					<tr>
						<th scope="row" class="text-primary whitespace-nowrap">{{ loop.index }} â˜…</th>
						<td class="stack">{{ item | markdown | safe }}</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</article>
	</article>
</div>
{% endblock %}
