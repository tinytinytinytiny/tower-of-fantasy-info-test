{% extends "layouts/base.html" %}

{% set title = name %}
{% set background = page.fileSlug %}

{% macro icon(src, alt, title) %}
<img
	src="/assets/images/icon/{{ src }}.png"
	alt="{{ alt }}"
	title="{{ title }}"
	class="inline-block mr-[0.4em]"
	width="34"
	height="31"
>
{% endmacro %}

{% block content %}
<header class="bg-sheet-1 region stack wrapper">
	<h1>{{ title }}</h1>
	<p class="font-fancy uppercase text-step-2">
		<span class="highlight-rarity" data-rarity="{{ rarity }}">{{ string.rarity[rarity - 1] }}</span> Simulacrum
	</p>
</header>
<article class="copy bg-sheet-1 region stack wrapper">
	<h2>Weapon</h2>
	<article class="sidebar items-center mt-l">
		<img class="flex-none" src="/assets/images/wep/{{ page.fileSlug }}.png" alt="{{ name }}â€™s weapon" width="128" height="128">
		<div class="stack">		
			<h3>{{ weapon.name }}</h3>
			<div class="grid gap-0">
				<figure>
					{{ icon('reso_' + weapon.resonance, weapon.resonance, 'Resonance: ' + weapon.resonance | capitalize) }}
					<figcaption class="inline-block">Resonance: <b>{{ weapon.resonance | capitalize }}</b></figcaption>
				</figure>
				<figure>
					{{ icon('ele_' + weapon.element, weapon.element, 'Element: ' + weapon.element | capitalize) }}
					<figcaption class="inline-block">Element: <b>{{ weapon.element | capitalize }}</b></figcaption>
				</figure>
				<div>
					{% set chargeRating = helpers.getWeaponRating(weapon.charge, string.weaponRating) %}
					<span class="highlight-rarity" data-rarity="{{ chargeRating.rarityColor }}">{{ chargeRating.rank | upper }}</span>
					Charge: <b>{{ weapon.charge.toFixed(2) }}</b>
				</div>
				<div>
					{% set shatterRating = helpers.getWeaponRating(weapon.shatter, string.weaponRating) %}
					<span class="highlight-rarity" data-rarity="{{ shatterRating.rarityColor }}">{{ shatterRating.rank | upper }}</span>
					Shatter: <b>{{ weapon.shatter.toFixed(2) }}</b>
				</div>
			</div>			
		</div>
	</article>
	<h3>Weapon Effects</h3>
	<h4 class="highlight-element highlight-bold font-fancy">{{ string.element[weapon.element].effectName }}</h4>
	<div class="highlight-bold">
		{{ string.element[weapon.element].description | markdown | safe }}
	</div>
	{% if weapon.exclusiveEffect %}
	<h4 class="highlight-bold font-fancy">Bonus Effect</h4>
	<div class="highlight-bold">
		{{ weapon.exclusiveEffect | markdown | safe }}
	</div>
	{% endif %}
	{% include "partials/simulacrum/materials.html" %}
	{% include "partials/simulacrum/rec-chips.html" %}
	{% include "partials/simulacrum/awakening.html" %}
</article>
{% endblock %}
